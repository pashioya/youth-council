<!DOCTYPE html>
<html
        lang="en"
        xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
        xmlns:th="http://www.thymeleaf.org">
<head>
    <thymeleaf
            th:replace="fragments/meta :: meta_script_link('Youth Council Platform')"></thymeleaf>
    <script
            defer
            th:src="@{/js/index.js}"></script>
    <link
            rel="stylesheet"
            th:href="@{/css/index.css}"/>
    <script defer th:src="@{/js/forms/add_news_item.js}"></script>
    <script defer th:src="@{/js/entities/interact_with_entity.js}"></script>
</head>

<body class="d-flex h-100 text-center bg-dark">
<div class="d-flex w-100 h-100 p-3 mx-auto flex-column top">
    <header
            class="mb-auto d-flex flex-row justify-content-between sticky-top bg-dark rounded p-3">
        <a
                class="d-flex h-100 align-items-center text-decoration-none"
                role="link"
                th:href="@{/}">
            <div>
                <img
                        alt="Image Not Found!"
                        class="object-fit-cover"
                        style="height: 30px; width: 30px"
                        th:src="'data:image/jpeg;base64,' + ${logo}"/>
            </div>
            <div class="ms-5">
                <h3
                        class="mb-0 text-light d-none d-md-block"
                        th:text="${tenant}"></h3>
            </div>
        </a>
        <nav class="nav nav-masthead justify-content-center float-md-end">
            <a
                    aria-current="page"
                    class="nav-link fw-bold py-1 px-0 active"
            >Home</a
            >
            <a
                    aria-current="page"
                    class="nav-link fw-bold py-1 px-0"
                    th:href="@{/info-pages}"
            >Get Informed!</a
            >

            <a
                    class="nav-link fw-bold py-1 px-0"
                    sec:authorize="!isAuthenticated()"
                    th:href="@{/login}"
            >Log In</a
            >
            <div class="dropdown ps-3" sec:authorize="isAuthenticated()">
                <button
                        aria-expanded="false"
                        class="btn btn-outline-light dropdown-toggle"
                        data-bs-toggle="dropdown"
                        type="button"
                >
                    <svg
                            class="bi bi-person-circle"
                            fill="currentColor"
                            height="32"
                            style="width: 32px; height: 32px"
                            viewBox="0 0 16 16"
                            width="32"
                            xmlns="http://www.w3.org/2000/svg"
                    >
                        <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                        <path
                                d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"
                                fill-rule="evenodd"
                        />
                    </svg>
                </button>
                <ul class="dropdown-menu rounded-0 text-center">
                        <span class="dropdown-item text-primary disabled muted"
                              sec:authentication="name"></span>
                    <li>
                        <button class="dropdown-item" type="button">Profile</button>
                    </li>
                    <li>
                        <button class="dropdown-item" type="button">Settings</button>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li>
                        <form
                                class="dropdown-item"
                                th:action="@{/logout}"
                                th:method="POST"
                        >
                            <button class="dropdown-item text-center" type="submit">Logout</button>
                        </form>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <main class="px-3 min-vh-100 d-flex flex-column">
        <div
                class="d-flex justify-content-center align-items-center text-light my-2"
                id="home">
            <h1 class="animate-title display-2 h-100 p-2">News Items</h1>
        </div>
        <div class="w-75 d-flex flex-lg-wrap justify-content-between align-self-center row">

            <div class="align-self-center col-lg-6" th:each="newsItem : ${newsItems}">
                <!--            content-->
                <div
                        class="bg-black rounded-3 border-dark text-white g-0 border rounded overflow-hidden mb-4 d-flex shadow-sm h-md-250 position-relative w-auto h-auto"
                >
                    <div
                            class="col p-4 d-flex flex-column position-static"
                    >
                        <h3 class="mb-0 text-start" th:text="${newsItem.getTitle()}"></h3>
                        <div class="col d-flex gap-2">
                            <!--                                time-->
                            <div class="text-muted fs-6"
                                 th:text="${#temporals.format(newsItem.getDateAdded(), 'yyyy-MM-dd')}">Date
                                /Time
                            </div>
                        </div>
                        <p class="card-text mb-5 text-wrap" th:text="${newsItem.getContent()}">
                        </p>
                        <div class="d-flex flex-row gap-3">
                            <!--                                like button-->
                            <div
                                    class="d-flex flex-row align-items-center"
                                    role="button"
                                    th:attr="onclick=|toggleLike(${newsItem.getId()},'news-items')|"
                                    th:id="|like-container-${newsItem.getId()}|"
                            >
                                <svg
                                        class="transformable"
                                        height="24"
                                        th:style="|fill: ${newsItem.isLikedByUser() ? 'red' : 'white'}|"
                                        viewBox="0 0 24 24"
                                        width="24"
                                        xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                            d="M20.205 4.791a5.938 5.938 0 0 0-4.209-1.754A5.906 5.906 0 0 0 12 4.595a5.904 5.904 0 0 0-3.996-1.558 5.942 5.942 0 0 0-4.213 1.758c-2.353 2.363-2.352 6.059.002 8.412L12 21.414l8.207-8.207c2.354-2.353 2.355-6.049-.002-8.416z"
                                    ></path>
                                </svg>
                                <p class="small text-muted mb-0"
                                   th:text="${newsItem.getNumberOfLikes()}"></p>
                            </div>
                            <!--                                end like button-->
                        </div>
                    </div>
                    <!--                    end content-->
                    <!--            image-->
                    <div class="col-auto d-none d-lg-flex">
                        <img alt="Section Image" src="https://picsum.photos/200/250"/>
                    </div>
                    <!--            end image-->
                </div>
            </div>
        </div>
        <!--			END ADD BUTTON-->
    </main>
    <div class="container sticky-bottom">
        <button
                class="btn btn-success lg-rounded shadow position-absolute bottom-0 end-0 mb-5 me-5"
                data-bs-target="#create-news-item-modal" data-bs-toggle="modal"
        >
            <svg
                    fill="none"
                    height="48"
                    stroke="white"
                    stroke-width="1.5"
                    viewBox="0 0 24 24"
                    width="48"
                    xmlns="http://www.w3.org/2000/svg"
            >
                <path
                        d="M12 4.5v15m7.5-7.5h-15"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                />
            </svg>
        </button>
    </div>
    <div aria-hidden="true" aria-labelledby="news-item-submission-modal-label" class="modal fade"
         id="create-news-item-modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5 text-center" id="news-item-submission-modal-label">Create
                        News Item</h1>
                    <button aria-label="Close" class="btn-close" data-bs-dismiss="modal"
                            type="button"></button>
                </div>
                <div class="modal-body">
                    <form id="submitForm">
                        <div class="form-group mb-3">
                            <label for="title">Title</label>
                            <input class="form-control" id="title" name="title" type="text">
                        </div>
                        <div class="form-group mb-3">
                            <label for="content">Content</label>
                            <input class="form-control" id="content" name="content" type="text">
                        </div>
                        <div class="form-group mb-3">
                            <label for="image">Image</label>
                            <input accept="image/*" class="form-control" id="image" name="image"
                                   type="file">
                        </div>
                        <div class="form-group mt-3 mb-5 d-flex align-items-center justify-content-center">
                            <a class="btn btn-primary" id="submit-news-item">Create</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div th:include="fragments/footer :: footer"></div>
</div>
</body>
</html>
